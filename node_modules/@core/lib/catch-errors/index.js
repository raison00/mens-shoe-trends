/* eslint-disable no-console */
const _ = require('lodash');
const chalk = require('chalk');

module.exports = async (runAll) => {
  try {
    await runAll().then(() => {
      console.log(_.repeat(chalk.blue('='), process.stdout.columns));
      console.log(`\n${chalk.bold.green('All done!')} ✌️\n`);
    });
  } catch (err) {
    const error = err || new Error('Unknown Error');

    // don't print error stack - discrete messaging for all command line scripts
    console.error(chalk.red(error));

    if (error.details) {
      console.error(error.details);
    }

    process.exit(1);
  }
};
