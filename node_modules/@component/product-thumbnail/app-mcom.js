import Backbone from 'backbone';
import '@core/style-guide/src/scss/macys-base.scss';
import ProductThumbnail from './src/product-thumbnail';
import app from './app';

app.brand = 'mcom';

app.on('start', () => {
  // Inject Coremetrics for testing in isolation
  const cmcustom = document.createElement('script');
  cmcustom.type = 'text/javascript';
  cmcustom.src = 'https://www.macys.com/web20/assets/script/coremetrics/cmcustom.js';
  document.head.appendChild(cmcustom);

  const thumbnailModel = new Backbone.Model(require('./product.json'));
  const productThumbnail = new ProductThumbnail({
    el: '#holder',
    model: thumbnailModel,
    pageID: 'search_results',
    searchPass: 'jeans',
    props: {},
  });
  productThumbnail.render();
  productThumbnail.bootstrap();
});

export default app;
