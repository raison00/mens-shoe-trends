module.exports = (filePath, urlTemplate = 'https://images.bloomingdales.com/is/image/BLM/products') => {
  const clearGif = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
  if (filePath) {
    const width = 236;
    const quality = '90,0';
    let imgUrl = '';
    let path = filePath;

    if (!/\.(tif)$/i.test(path)) {
      path = `${path}.tif`;
    }

    if (urlTemplate.indexOf('[IMAGEFILEPATH]') > 0) {
      imgUrl = urlTemplate
        .replace(/\[IMAGEFILEPATH\]/gi, path)
        .replace(/\[WIDTH\]/gi, width)
        .replace(/\[QUALITY\]/gi, quality);
    } else {
      imgUrl += `${urlTemplate}/${path}`;
      imgUrl += `?bgc=255,255,255&wid=${width}`;
      imgUrl += '&qlt=90,0&layer=comp&op_sharpen=0&resMode=bicub&op_usm=0.7,1.0,0.5,0&fmt=jpeg';
    }
    return imgUrl;
  }
  return clearGif;
};
