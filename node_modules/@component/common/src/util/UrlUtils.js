{
  // This public function checks url pattern for a query parameter
  // if the query parameter is present it replaces it's old value with the new value
  // if query parameter is not present in the url it will add the parameter and value to it.
  function addOrReplaceParam(url, param, value) {
    const regEx = new RegExp(`[\\?&]${param}=([^&#]*)`);
    const match = regEx.exec(url);
    let delimiter;
    let newUrl;

    if (match === null) {
      // append new param
      const hasQuestionMark = /\?/.test(url);
      delimiter = hasQuestionMark ? '&' : '?';
      newUrl = `${url + delimiter + param}=${value}`;
    } else {
      delimiter = match[0].charAt(0);
      newUrl = url.replace(regEx, `${delimiter + param}=${value}`);
    }

    return newUrl;
  }

  module.exports = {
    addOrReplaceParam,
  };
}
